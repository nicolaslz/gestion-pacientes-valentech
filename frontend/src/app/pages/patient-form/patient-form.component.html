<div class="main-bg py-5">
  <div class="container">
    <div class="card shadow-lg rounded-4 mx-auto p-4" style="max-width: 800px;">
      <h3 class="text-center text-primary fw-bold mb-4">Registrar Paciente</h3>

      <form #form="ngForm" (ngSubmit)="submit(form)" [ngClass]="{ 'was-submitted': submitted }" novalidate>
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Nombre</label>
            <input class="form-control rounded-pill" name="name" [(ngModel)]="patient.name" required minlength="2"
                   pattern="^[a-zA-ZÁÉÍÓÚáéíóúñÑ ]+$" #name="ngModel" autocomplete="off">
            <div *ngIf="name.invalid && name.touched" class="text-danger small mt-1">
              <div *ngIf="name.errors?.['required']">El nombre es obligatorio.</div>
              <div *ngIf="name.errors?.['minlength']">Debe tener al menos 2 caracteres.</div>
              <div *ngIf="name.errors?.['pattern']">Solo se permiten letras y espacios.</div>
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label">Cédula</label>
            <input class="form-control rounded-pill" name="document" [(ngModel)]="patient.document" required minlength="6"
                   pattern="^[0-9]+$" #document="ngModel" autocomplete="off">
            <div *ngIf="document.invalid && document.touched" class="text-danger small mt-1">
              <div *ngIf="document.errors?.['required']">La cédula es obligatoria.</div>
              <div *ngIf="document.errors?.['minlength']">Debe tener al menos 6 dígitos.</div>
              <div *ngIf="document.errors?.['pattern']">Solo se permiten números.</div>
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label">Email</label>
            <input class="form-control rounded-pill" type="email" name="email" [(ngModel)]="patient.email" required
            pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-z]{2,4}$"
            #email="ngModel" autocomplete="off">
            <div *ngIf="email.invalid && email.touched" class="text-danger small mt-1">
              <div *ngIf="email.errors?.['required']">El correo es obligatorio.</div>
              <div *ngIf="email.errors?.['pattern']">El formato del correo no es válido.</div>
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label">Teléfono</label>
            <input class="form-control rounded-pill" name="phone" [(ngModel)]="patient.phone" required pattern="^[0-9]{10}$"
                   #phone="ngModel" autocomplete="off">
            <div *ngIf="phone.invalid && phone.touched" class="text-danger small mt-1">
              <div *ngIf="phone.errors?.['required']">El teléfono es obligatorio.</div>
              <div *ngIf="phone.errors?.['pattern']">Debe contener exactamente 10 dígitos numéricos.</div>
            </div>
          </div>

          <div class="col-md-12">
            <label class="form-label">Enfermedad</label>
            <input class="form-control rounded-pill" name="disease" [(ngModel)]="patient.disease" required minlength="3"
                   pattern="^[a-zA-ZÁÉÍÓÚáéíóúñÑ ]+$" #disease="ngModel" autocomplete="off">
            <div *ngIf="disease.invalid && disease.touched" class="text-danger small mt-1">
              <div *ngIf="disease.errors?.['required']">La enfermedad es obligatoria.</div>
              <div *ngIf="disease.errors?.['minlength']">Debe tener al menos 3 caracteres.</div>
              <div *ngIf="disease.errors?.['pattern']">Solo se permiten letras y espacios.</div>
            </div>
          </div>
        </div>

        <div class="d-flex justify-content-end mt-4">
          <button class="btn btn-outline-primary rounded-pill px-4" [disabled]="form.invalid || loading">
            <i class="bi bi-check-circle me-1"></i> Registrar
          </button>
        </div>
      </form>
      <div class="text-center mt-5">
        <img src="assets/logov.png" alt="Valentech Logo" width="150" height="100">
      </div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div class="toast align-items-center border-0" role="alert"
         [ngClass]="{
           show: showToast,
           hide: !showToast,
           'text-bg-success': toastType === 'success',
           'text-bg-danger': toastType === 'error'
         }">
      <div class="d-flex">
        <div class="toast-body">
          {{ toastMessage }}
        </div>
        <button type="button" class="btn-close btn-close-white me-2 m-auto" (click)="showToast = false"></button>
      </div>
    </div>
  </div>
</div>


